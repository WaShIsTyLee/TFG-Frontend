<ion-content>
  <ion-header>
    <ion-toolbar>
      <ion-title>Mis Reservas</ion-title>
    </ion-toolbar>
  </ion-header>

  <!-- Reservas Activas -->
  <h2 class="titulo-seccion">Reservas Activas</h2>
  <div *ngIf="reservasActivas.length > 0; else sinReservasActivas" class="card-container">
    <ion-card *ngFor="let reserva of reservasActivas" class="reserva-card">
      <ion-card-header>
        <ion-card-title>Parking: {{ reserva.parking?.nombre }}</ion-card-title>
        <ion-card-subtitle>Plaza: {{ reserva.plaza?.numeroPlaza }}</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <p><strong>Matrícula:</strong> {{ reserva.matricula || 'No disponible' }}</p>
        <p><strong>Entrada:</strong> {{ formatFecha(reserva.diaEntrada) }}</p>
        <p><strong>Salida:</strong> {{ formatFecha(reserva.diaSalida) }}</p>

        <ion-button expand="block" color="primary" (click)="mostrarTicket(reserva)" class="mb-2">
          <ion-icon slot="start" name="document-text-outline"></ion-icon>
          Mostrar Ticket
        </ion-button>

        <ion-button expand="block" color="danger" (click)="confirmarEliminar(reserva)">
          <ion-icon slot="start" name="trash-outline"></ion-icon>
          Eliminar Reserva
        </ion-button>
      </ion-card-content>
    </ion-card>
  </div>

  <ng-template #sinReservasActivas>
    <ion-text color="medium">
      <p class="ion-padding">No tienes reservas activas.</p>
    </ion-text>
  </ng-template>

  <!-- Reservas Totales -->
  <h2 class="titulo-seccion">Reservas Totales</h2>
  <div *ngIf="reservasTotales.length > 0; else sinReservasTotales" class="card-container">
    <ion-card *ngFor="let reserva of reservasTotales" class="reserva-card">
      <ion-card-header>
        <ion-card-title>Parking: {{ reserva.parking?.nombre }}</ion-card-title>
        <ion-card-subtitle>Plaza: {{ reserva.plaza?.numeroPlaza }}</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <p><strong>Matrícula:</strong> {{ reserva.matricula || 'No disponible' }}</p>
        <p><strong>Entrada:</strong> {{ formatFecha(reserva.diaEntrada) }}</p>
        <p><strong>Salida:</strong> {{ formatFecha(reserva.diaSalida) }}</p>

        <ion-button expand="block" color="primary" (click)="mostrarTicket(reserva)" class="mb-2">
          <ion-icon slot="start" name="document-text-outline"></ion-icon>
          Mostrar Ticket
        </ion-button>

        <ion-button expand="block" color="danger" (click)="confirmarEliminar(reserva)">
          <ion-icon slot="start" name="trash-outline"></ion-icon>
          Eliminar Reserva
        </ion-button>
      </ion-card-content>
    </ion-card>
  </div>

  <ng-template #sinReservasTotales>
    <ion-text color="medium">
      <p class="ion-padding">No tienes reservas totales.</p>
    </ion-text>
  </ng-template>
</ion-content>
