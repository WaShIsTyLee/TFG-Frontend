<ion-header>
  <ion-title>Mis Reservas</ion-title>
</ion-header>

<ion-content class="login-background">
  <!-- Reservas Activas -->
  <h2 class="titulo-seccion">Reservas Activas</h2>
  <div *ngIf="reservasActivas.length > 0; else sinReservasActivas" class="card-container">
    <ion-card *ngFor="let reserva of reservasActivas" class="reserva-card">
      <ion-card-header>
        <ion-card-title>Parking: {{ reserva.parking?.nombre }}</ion-card-title>
        <ion-card-subtitle>Plaza: {{ reserva.plaza?.numeroPlaza }}</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <p><strong>Matrícula:</strong> {{ reserva.matricula || 'No disponible' }}</p>
        <p><strong>Entrada:</strong> {{ formatFecha(reserva.diaEntrada) }}</p>
        <p><strong>Salida:</strong> {{ formatFecha(reserva.diaSalida) }}</p>

        <!-- Botón Mostrar Ticket -->
        <ion-button expand="block" class="btn-ticket" (click)="mostrarTicket(reserva)">
          Mostrar Ticket
        </ion-button>

        <!-- Botón Eliminar Reserva -->
        <ion-button expand="block" class="btn-eliminar" (click)="confirmarEliminar(reserva)">
          Eliminar Reserva
        </ion-button>
      </ion-card-content>
    </ion-card>
  </div>

  <ng-template #sinReservasActivas>
    <ion-text color="medium">
      <p class="ion-padding">No tienes reservas activas.</p>
    </ion-text>
  </ng-template>

  <!-- Reservas Totales -->
  <h2 class="titulo-seccion">Reservas Totales</h2>
  <div *ngIf="reservasTotales.length > 0; else sinReservasTotales" class="card-container">
    <ion-card *ngFor="let reserva of reservasTotales" class="reserva-card">
      <ion-card-header>
        <ion-card-title>Parking: {{ reserva.parking?.nombre }}</ion-card-title>
        <ion-card-subtitle>Plaza: {{ reserva.plaza?.numeroPlaza }}</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <p><strong>Matrícula:</strong> {{ reserva.matricula || 'No disponible' }}</p>
        <p><strong>Entrada:</strong> {{ formatFecha(reserva.diaEntrada) }}</p>
        <p><strong>Salida:</strong> {{ formatFecha(reserva.diaSalida) }}</p>

        <!-- Botón Mostrar Ticket -->
        <ion-button expand="block" class="btn-ticket" (click)="mostrarTicket(reserva)">
          Mostrar Ticket
        </ion-button>
      </ion-card-content>
    </ion-card>
  </div>

  <ng-template #sinReservasTotales>
    <ion-text color="medium">
      <p class="ion-padding">No tienes reservas totales.</p>
    </ion-text>
  </ng-template>
</ion-content>